@model sams.Models.SiteDetails
@using sams.Common;
@{
    UserViewModel loggedInUser = Context.Session.GetObjectFromJson<UserViewModel>("LoggedInAdmin");
}

@{

    var selTransactionHide = "";
    ViewData["Title"] = "ViewNewProperty";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";

    var showAcquisition = "";
    var showDispositions = "";
    var showLease = "";
    var showLeaseWithPurchase = "";

    var rbtnAcquisition = "";
    var rbtnDispositions = "";
    var rbtnLease = "";
    var rbtnLeaseWithPurchase = "";

    var disableAcquisition = "";
    var disableDisposition = "";

    var periodType = "";

    if (Model.DiligenceType == 0 || Model.DiligenceType == 1)
    {
        showAcquisition = "";
        showDispositions = "display:none";
        showLease = "display:none";
        showLeaseWithPurchase = "display:none";

        rbtnAcquisition = "checked";
        rbtnDispositions = "display:none";
        rbtnLease = "";
        rbtnLeaseWithPurchase = "";

        periodType = "Acquisition";
    }
    else if (Model.DiligenceType == 2)
    {
        showAcquisition = "display:none";
        showDispositions = "display:none";
        showLease = "display:none";
        showLeaseWithPurchase = "display:none";

        rbtnAcquisition = "";
        rbtnDispositions = "checked";
        rbtnLease = "";
        rbtnLeaseWithPurchase = "";

        periodType = "Disposition";
    }
    else if (Model.DiligenceType == 3)
    {
        showAcquisition = "display:none";
        showDispositions = "display:none";
        showLease = "";
        showLeaseWithPurchase = "display:none";

        rbtnAcquisition = "";
        rbtnDispositions = "";
        rbtnLease = "checked";
        rbtnLeaseWithPurchase = "";

        periodType = "Lease";
    }
    else if (Model.DiligenceType == 5)
    {
        showAcquisition = "display:none";
        showDispositions = "display:none";
        showLease = "display:none";
        showLeaseWithPurchase = "";

        rbtnAcquisition = "";
        rbtnDispositions = "";
        rbtnLease = "";
        rbtnLeaseWithPurchase = "checked";

        periodType = "LeaseWithPurchase";
    }
    else if (Model.DiligenceType == 7)
    {
        periodType = "PurchaseLeaseBack";
    }

    if (Model.AssetTypeId == 1)
    {
        periodType = "Lease";
    }
    else if (Model.AssetTypeId == 2)
    {
        periodType = "Acquisition";
    }
    else if (Model.AssetTypeId == 3)
    {
        periodType = "FeeSubjectToLease";
    }
    else if (Model.AssetTypeId == 7)
    {
        periodType = "PurchaseLeaseBack";
    }
    if (Model.AssetTypeId == 5)
    {
        periodType = "LeaseWithPurchaseOption";
    }

    if (Model.DiligenceAcquisitions == null)
    {
        Model.DiligenceAcquisitions = new DiligenceAcquisitionViewModel();
    }

    if (Model.DiligenceAcquisitions.AcquisitionStatus > 0)
    {
        disableAcquisition = "disabled";
    }

    var diligenceOpted = "";
    if (Model.DiligenceAcquisitions.DDPExtensionOpted == 1)
    {

        diligenceOpted = "checked";
    }

    string isBroker = "checked";
    string hideDiv = "";
    if (Model.CheckIfClientRepresentedByABroker == 0)
    {
        isBroker = "";
        hideDiv = " style=display:none; ";


    }


}

<script>
        function markAsInProgress(propertyId) {

            if (confirm("Do you want to confirm?")) {
                //location.href = "MarkInProgressList?propertyId=" + propertyId;
                var baseUrl = "@Url.Action("MarkInProgressList", "NewPropertyDashboard")?propertyId=" + propertyId;
                location.href = baseUrl;
            }
        }

        function markAsClosed(propertyId) {
            if (confirm("Do you want to Close?")) {
                var baseUrl = "@Url.Action("MarkAsClosed", "NewPropertyDashboard")?propertyId=" + propertyId;
                location.href = baseUrl;
            }
        }

        function editNewProperty(propertyId) {
            var baseUrl = "@Url.Action("OpenForEditProperty", "NewPropertyDashboard")?propertyId=" + propertyId;
            location.href = baseUrl;
    }

    function backToList() {
            var baseUrl = "@Url.Action("Index", "NewPropertyDashboard")";
            location.href = baseUrl;
        }

        function GetClosedList() {
            var baseUrl = "@Url.Action("GetClosedList", "NewPropertyDashboard")";
            location.href = baseUrl;
        }

        function GetInProgressList() {
            var baseUrl = "@Url.Action("GetListByStatus", "NewPropertyDashboard")?statusId=0";
            location.href = baseUrl;
        }



        function ddpExtensionNotApplicable1(e) {
            var selected = document.querySelector('[name="ddpExtensionNotApplicable"]:checked');

            $('#DDPExtensionOpted').val('0');
            if (selected != null) {
                $('#p_DDPExtension').val('');
                $('#DDPExtensionOpted').val('1');
            }
        }

        function postImage() {
            if (confirm("Do you want to proceed?")) {
                $("#frmImage").submit();
            }
        }

        function selectImage() {
            $("#UploadedImage").click();
        }

        function removeImage(imageId, propertyId) {

            if (confirm("Do you want to delete the image?")) {
                //location.href = "DeleteImage/?imageId=" + imageId + "&propertyId=" + propertyId;
                var baseUrl = "@Url.Action("DeleteImage", "NewPropertyDashboard")?imageId=" + imageId + "&propertyId=" + propertyId;
                location.href = baseUrl;
            }

    }

    function removeFile(fileId, propertyId) {

        if (confirm("Do you want to delete this file?")) {
            //location.href = "DeleteFile/?fileId=" + fileId + "&propertyId=" + propertyId;
            var baseUrl = "@Url.Action("DeleteFile", "NewPropertyDashboard")?fileId=" + fileId + "&propertyId=" + propertyId;
            location.href = baseUrl;
        }

    }

    

</script>


<style>
    #image-container {
        /*border-radius: 25px;*/
        border: 2px solid Black;
        padding: 15px 15px 15px 15px;
        margin: 20px 20px 20px 20px;
        background: #FFFFFF;
        overflow: visible;
        box-shadow: 5px 5px 2px #888888;
        position: relative;
    }

    #x {
        position: absolute;
        background: red;
        color: white;
        top: -10px;
        right: -10px;
    }
</style>


<div class="content-wrapper">
    <!-- Main content -->
    <section class="content">
        <div class="row">
            <div class="col-12">

                <div class="content-header">
                    <div class="container-fluid">
                        <div class="row mb-2">
                            <div class="col-sm-6">
                                <h1 class="m-0 text-dark">Property Details</h1>
                            </div><!-- /.col -->
                            <div class="col-sm-6">
                                <ol class="breadcrumb float-sm-right">

                                    @if (Model.IsDeleted == 0)
                                    {
                                        <li class="breadcrumb-item"><a href="javascript:backToList()">Back To List</a></li>
                                    }
                                    else if (Model.IsDeleted == 1)
                                    {
                                        <li class="breadcrumb-item"><a href="javascript:GetClosedList()">Back To List</a></li>
                                    }
                                    else if (Model.IsDeleted == 2)
                                    {
                                        <li class="breadcrumb-item"><a href="javascript:GetInProgressList()">Back To List</a></li>
                                    }


                                </ol>
                            </div><!-- /.col -->
                        </div><!-- /.row -->
                    </div><!-- /.container-fluid -->
                </div>




                <div class="row">
                    <div class="col-6">




                        <div class="card">
                            <div class="card-header @sams.Common.Helper.PrimaryColor">
                                <h3 class="card-title">Uploaded Files</h3>
                            </div>
                            <div class="card-body" style="padding:5px;">
                                <p>
                                    <img src="@Model.SelectedImageName" class="img-thumbnail" />
                                </p>

                                @if (@Model.SelectedPdfName.Trim().Length > 0)
                                {
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Other Files : </b>
                                        </div>
                                        <div class="col-8">
                                            <a href="@Model.SelectedPdfName" target="_blank">Download</a>
                                        </div>
                                    </div>

                                }





                            </div>
                            <!-- /.card-body -->
                            <!-- /.card-footer-->
                        </div>






                        <div class="card">



                            <div class="card-header @sams.Common.Helper.PrimaryColor">
                                <h3 class="card-title">Customer Details</h3>
                            </div>
                            <div class="card-body" style="padding:10px;">

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>First Name : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.FirstName
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Last Name : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.LastName
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Company Name : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.CompanyName
                                        </div>
                                    </div>
                                </div>



                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Address : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.Address
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>City Name : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.CityName
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>State : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.StateName
                                        </div>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>ZIP Code : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.ZipCode
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Contact Number : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.ContactNumber
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Email Address : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.EmailAddress
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="row">
                                        <div class="col-4">
                                            <b>Created : </b>
                                        </div>
                                        <div class="col-8">
                                            @Model.CreatedDate.ToString("MM/dd/yyyy")
                                        </div>
                                    </div>
                                </div>



                            </div>
                            <!-- /.card-body -->
                            <!-- /.card-footer-->
                        </div>
                        <!-- /.card -->








                        <div class="card card-info">
                            <div class="card-header @sams.Common.Helper.PrimaryColor">
                                <h3 class="card-title">Plats Or Other Pdf</h3>
                            </div>
                            <div class="card-body">
                                <div class="row">

                                    <div class="col-lg-12">

                                        <ul class="list-unstyled">
                                            @foreach (var pdfItem in Model.AdditionalFiles)
                                            {
                                                <li>
                                                    <div class="row">
                                                        <div class="col-lg-8">
                                                            @pdfItem.FileType
                                                            <hr />

                                                        </div>
                                                        <div class="col-lg-4">

                                                            @if (@Model.SelectedPropertyStatusId != 3)
                                                                @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 3).CanEdit)
                                                                {
                                                                    <button type="button" class="btn btn-xs btn-danger" onclick="removeFile(@pdfItem.FileId, @Model.SiteDetailsId)">
                                                                        Delete File
                                                                    </button>
                                                                }

                                                            </div>


                                                            <div class="col-lg-12">
                                                                <a href="@Url.Content("~/" + pdfItem.FileName)" class="btn-link text-secondary" target="_blank">
                                                                    <i class="far fa-fw fa-file-word"></i>@pdfItem.FileNameWithoutPath
                                                                </a>
                                                            </div>

                                                        </div>
                                                        <hr />
                                                    </li>
                                                }

                                        </ul>

                                    </div>


                                </div>

                                @if (@Model.SelectedPropertyStatusId != 3)
                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 3).CanEdit)
                                    {
                                        <button type="button" class="btn btn-sm btn-warning" data-toggle="modal" data-target="#modal-default">
                                            Upload File
                                        </button>
                                    }


                                </div>
                                <!-- /.card-body -->
                            </div>








                        </div>

                        <div class="col-6">


                            <div class="card">
                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                    <h3 class="card-title">Property Details</h3>
                                </div>
                                <div class="card-body" style="padding:10px;">

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Asset # : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.AssetId
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Address : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.SiteAddress
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>City : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.SiteCity
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>State : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.SiteStateName
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>County : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.SiteCounty
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Cross Street Name : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.SiteCrossStreetName
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Asking Price : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.SalesPrice
                                            </div>
                                        </div>
                                    </div>

                                    


                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Status : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.NewPropertyStatusName
                                            </div>
                                        </div>
                                    </div>

                                    @{
                                        var dtStatusChangedDate = Model.StatusChangedDate == default(DateTime?) ? "" : Model.StatusChangedDate.Value.ToString("MM-dd-yyyy");
                                    }
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Status Change Date : </b>
                                            </div>
                                            <div class="col-8">
                                                @dtStatusChangedDate
                                            </div>
                                        </div>
                                    </div>


                                </div>
                                <!-- /.card-body -->
                                <!-- /.card-footer-->
                            </div>


                            <div class="card">
                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                    <h3 class="card-title">Additional Details</h3>
                                </div>
                                <div class="card-body" style="padding:10px;">

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Zoning : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.Zoning
                                            </div>
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Lot Size : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.LotSize
                                            </div>
                                        </div>
                                    </div>




                                    
                                    <!--
                                        <div class="row">
                                            <div class="col-4">
                                                <b>Comments : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.Comments
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-4">
                                                <b>Potential Use : </b>
                                            </div>
                                            <div class="col-8">
                                                @Model.PotentialUse
                                            </div>
                                        </div>
                                        -->


                                    <div class="form-group">
                                        <label for="AssetTypeId" class="control-label">Asset Type : </label>
                                        @if (Model != null)
                                        {
                                            foreach (var itemSel in Model.AssetTypeList)
                                            {
                                                if (Model.AssetTypeId == itemSel.AssetTypeId)
                                                {
                                                    @itemSel.AssetTypeName
                                                }

                                            }
                                        }

                                        @if (Model.AssetTypeId == (int)SamAssetType.PurchaseLeaseBack)
                                        {
                                            <div class="card card-info" id="divAssetTypeFee">

                                                <div class="card-body">

                                                    <div class="form-group">
                                                        <label asp-for="PurchasePrice" class="control-label">Purchase Price : </label>

                                                        <div class="input-group mb-3">
                                                            @Model.PurchasePrice
                                                        </div>

                                                    </div>

                                                    <div class="form-group">
                                                        <label asp-for="Term" class="control-label">Term : </label> @Model.PurchaseLeasebackTerm
                                                    </div>

                                                    <div class="form-group">
                                                        <label asp-for="AskingRent" class="control-label">Rent : </label> @Model.PurchaseLeasebackRent
                                                    </div>

                                                    <div class="form-group">
                                                        <label class="control-label">Lease Type : </label>
                                                        @if (Model != null)
                                                        {
                                                            foreach (var itemSel in Model.LeaseTypeList)
                                                            {
                                                                if (Model.PurchaseLeasebackLeaseTypeId == itemSel.LeaseTypeId)
                                                                {
                                                                    @itemSel.LeaseType
                                                                }

                                                            }
                                                        }
                                                    </div>

                                                    <div class="form-group">
                                                        <label asp-for="PurchaseLeasebackPotentialUse" class="control-label">Potential Use : </label>
                                                        @Model.PurchaseLeasebackPotentialUse
                                                    </div>

                                                    <div class="form-group">
                                                        <label asp-for="PurchaseLeasebackComments" class="control-label">Comments : </label>
                                                        @Model.PurchaseLeasebackComments
                                                    </div>

                                                </div>
                                            </div>
                                        }
                                        else if (Model.AssetTypeId == (int)SamAssetType.Lease)
                                        {
                                            <div class="card-body">

                                                <div class="form-group">
                                                    <label asp-for="Term" class="control-label">Term : </label> @Model.Term
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="AskingRent" class="control-label">Rent : </label> @Model.AskingRent
                                                </div>

                                                <div class="form-group">
                                                    <label for="selLeaseType" class="control-label">Lease Type : </label>
                                                    @if (Model != null)
                                                    {
                                                        foreach (var itemSel in Model.LeaseTypeList)
                                                        {
                                                            if (Model.LeaseType == itemSel.LeaseTypeId)
                                                            {
                                                                @itemSel.LeaseType
                                                            }
                                                        }
                                                    }
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="PotentialUse" class="control-label">Potential Use : </label>
                                                    @Model.PotentialUse
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="Comments" class="control-label">Comments : </label>
                                                    @Model.Comments
                                                </div>

                                            </div>
                                        }
                                        else if (Model.AssetTypeId == (int)SamAssetType.LeaseWithPurchaseOption)
                                        {
                                            <div class="card-body">

                                                <div class="form-group">
                                                    <label asp-for="Term" class="control-label">Term : </label> @Model.TermOptionPurchase
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="AskingRent" class="control-label">Asking Rent : </label> @Model.AskingRentOptionPurchase
                                                </div>

                                                <div class="form-group">
                                                    <label for="selLeaseType" class="control-label">Lease Type : </label>
                                                    @if (Model != null)
                                                    {
                                                        foreach (var itemSel in Model.LeaseTypeList)
                                                        {
                                                            if (Model.LeaseTypePurchase == itemSel.LeaseTypeId)
                                                            {
                                                                @itemSel.LeaseType
                                                            }
                                                        }
                                                    }
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="OptionPurchase" class="control-label">Option Purchase : </label> @Model.OptionPurchase
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="PotentialUse" class="control-label">Potential Use : </label>
                                                    @Model.PotentialUse
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="CommentsOptionPurchase" class="control-label">Comments : </label>
                                                    @Model.CommentsOptionPurchase
                                                </div>

                                            </div>
                                        }
                                        else if (Model.AssetTypeId == (int)SamAssetType.Fee)
                                        {
                                            <div class="card-body">

                                                <div class="form-group">
                                                    <label asp-for="AskingPrice" class="control-label">Asking Price : </label> @Model.AskingPrice
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="FeePotentialUse" class="control-label">Potential Use : </label>
                                                    @Model.FeePotentialUse
                                                </div>

                                                <div class="form-group">
                                                    <label asp-for="FeeComments" class="control-label">Comments : </label>
                                                    @Model.FeeComments
                                                </div>

                                            </div>
                                        }






                                    </div>


                                    <div class="form-group">
                                        <div class="icheck-success d-inline">
                                            <input type="checkbox" name="ddpExtensionNotApplicable" id="radioClientRepresentation" disabled @isBroker>
                                            <label for="radioClientRepresentation">
                                                Check If Client Represented By A Broker
                                            </label>
                                        </div>

                                    </div>

                                    <div id="clientRepresentation" @hideDiv>

                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-4">
                                                    <b>Broker/ Firm Name : </b>
                                                </div>
                                                <div class="col-8">
                                                    @Model.BrokerOrFirmName
                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-4">
                                                    <b>Broker Contact Number : </b>
                                                </div>
                                                <div class="col-8">
                                                    @Model.BrokerContactNumber
                                                </div>
                                            </div>
                                        </div>

                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-4">
                                                    <b>Broker Email Address : </b>
                                                </div>
                                                <div class="col-8">
                                                    @Model.BrokerEmailAddress
                                                </div>
                                            </div>
                                        </div>

                                    </div>







                                </div>

                                <!-- /.card-footer-->
                            </div>



                            <!-- Input addon -->
                            <div class="card card-info">
                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                    <h3 class="card-title">Images</h3>
                                </div>
                                <div class="card-body">


                                    <div class="row">
                                        @foreach (var imgItem in Model.PropertyImageList)
                                        {
                                            <div id="image-container">
                                                @if (@Model.SelectedPropertyStatusId != 3)
                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 3).CanEdit)
                                                    {
                                                        <button id="x" onclick="removeImage(@imgItem.ImageId, @Model.SiteDetailsId)">
                                                            X
                                                        </button>
                                                    }
                                                    <a href="@Url.Content("~/" +imgItem.ImageName)" target="_blank">
                                                        <img src="@Url.Content("~/" +imgItem.ImageName)" style="width:100px;" />
                                                    </a>

                                                </div>
                                                <!-- <div class="col-lg-6"> -->

                                                <!-- </div> -->
                                            }

                                    </div>

                                    <form id="frmImage" name="frmImage" method="post" enctype="multipart/form-data" action="@Url.Action("UploadImage", "NewPropertyDashboard")">

                                        <div class="form-group">
                                            <input type="file" name="UploadedImage" id="UploadedImage" accept="image/x-png,image/gif,image/jpeg" onchange="postImage()" style="visibility:hidden;" />
                                            <input type="hidden" id="ImageId" name="ImageId" value="0" />
                                            <input type="hidden" id="PropertyType" name="PropertyType" value="5" />
                                            <input type="hidden" id="PropertyId" name="PropertyId" value="@Model.SiteDetailsId" />

                                            @if (@Model.SelectedPropertyStatusId != 3)
                                                @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 3).CanEdit)
                                                {
                                                    <a href="javascript:selectImage()" class="btn btn-sm btn-warning">Add Image</a>
                                                }

                                            </div>




                                        </form>
                                        <!-- /input-group -->
                                    </div>
                                    <!-- /.card-body -->
                                </div>
                                <!-- /.card -->









                            </div>

                        </div>



                        <div class="row">
                            <div class="col-12">

                                @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                {
                                    <!--
                                    @if (Model.IsDeleted == 0)
                                    {
                                        <button class="btn btn-info" onclick="markAsInProgress(@Model.SiteDetailsId)">Work In-Progress</button>
                                        <button class="btn btn-success" onclick="markAsClosed(@Model.SiteDetailsId)">Closed</button>
                                    }
                                    else if (Model.IsDeleted == 2)
                                    {
                                        <button class="btn btn-success" onclick="markAsClosed(@Model.SiteDetailsId)">Closed</button>
                                    }
                                    -->

                                    <button class="btn btn-success" onclick="editNewProperty(@Model.SiteDetailsId)">Edit</button>
                                    <button class="btn btn-info" onclick="backToList()">Show List</button>
                                }


                            </div>

                            <div class="col-12">
                                &nbsp;
                            </div>

                        </div>
                        <!-- /.row -->




                        @if (Model.SiteDetailsId > 0)
                        {
                            <hr />
                            <h1>Transaction Management</h1>
                            <hr />

                            <div class="row">
                                <div class="col-12 col-sm-12">



                                    <script>
                                            function markAcquisition() {
                                                $("#divAcquisitions").show();
                                                $("#divDispositions").hide();
                                                $("#divLease").hide();
                                                $("#divLeaseWithPurchase").hide();

                                                $("#divTblAcquisition").show();
                                                $("#divTblDisposition").hide();
                                                $("#divTblLease").hide();
                                                $("#divTblLeaseWithPurchse").hide();

                                                $("#periodType").val("Acquisition");
                                            }

                                            function markDispositions() {
                                                $("#divAcquisitions").hide();
                                                $("#divDispositions").show();
                                                $("#divLease").hide();
                                                $("#divLeaseWithPurchase").hide();

                                                $("#divTblAcquisition").hide();
                                                $("#divTblDisposition").show();
                                                $("#divTblLease").hide();
                                                $("#divTblLeaseWithPurchse").hide();

                                                $("#periodType").val("Disposition");
                                            }

                                            function markLease() {
                                                $("#divAcquisitions").hide();
                                                $("#divDispositions").hide();
                                                $("#divLease").show();
                                                $("#divLeaseWithPurchase").hide();

                                                $("#divTblAcquisition").hide();
                                                $("#divTblDisposition").hide();
                                                $("#divTblLease").show();
                                                $("#divTblLeaseWithPurchse").hide();

                                                $("#periodType").val("Lease");
                                        }

                                        function markLeaseWithPurchase() {
                                            $("#divAcquisitions").hide();
                                            $("#divDispositions").hide();
                                            $("#divLease").hide();
                                            $("#divLeaseWithPurchase").show();

                                            $("#divTblAcquisition").hide();
                                            $("#divTblDisposition").hide();
                                            $("#divTblLease").hide();
                                            $("#divTblLeaseWithPurchse").show();

                                            $("#periodType").val("LeaseWithPurchase");
                                        }

                                            function saveDiligenceAcquire() {
                                                $("#SaveDiligenceAcquisition").submit();
                                            }

                                            function saveDiligenceDispositions() {
                                                $("#SaveDiligenceDispositions").submit();
                                            }

                                            function closeDisposition(diligenceDispositionsId, propertyId) {
                                                if (confirm("Dou you want to Close?")) {
                                                    location.href = "CloseDisposition/?diligenceDispositionsId=" + diligenceDispositionsId + "&propertyId=" + propertyId;
                                                }
                                            }

                                            function terminateDisposition(diligenceDispositionsId, propertyId) {
                                                if (confirm("Dou you want to Terminate?")) {
                                                    location.href = "TerminateDisposition/?diligenceDispositionsId=" + diligenceDispositionsId + "&propertyId=" + propertyId;
                                                }
                                            }

                                            function closeAcquisition(diligenceAcquisitionId, propertyId) {
                                                if (confirm("Dou you want to Close?")) {
                                                    location.href = "CloseAcquisition/?diligenceAcquisitionId=" + diligenceAcquisitionId + "&propertyId=" + propertyId;
                                                }
                                            }

                                            function terminateAcquisition(diligenceAcquisitionId, propertyId) {
                                                if (confirm("Dou you want to Terminate?")) {
                                                    location.href = "TerminateAcquisition/?diligenceAcquisitionId=" + diligenceAcquisitionId + "&propertyId=" + propertyId;
                                                }
                                            }

                                            function saveDiligenceLease() {
                                                $("#SaveDiligenceLease").submit();
                                        }

                                        function saveDiligenceLeaseWithPurchase() {
                                            $("#SaveDiligenceLeaseWithPurchase").submit();
                                        }

                                        function saveDiligenceDispositions_SaleLeaseBack() {
                                            $("#SaveDiligenceDispositions_SaleLeaseBack").submit();
                                        }




                                        function editPeriod(periodId, periodMaster, startDate, duration, periodNotes, alertDate, emailAddress) {
                                                $("#p_PeriodId").val(periodId);
                                                $("#p_PropertyId").val(@Model.SiteDetailsId);
                                                $("#p_PeriodMaster").val(periodMaster);
                                                $("#p_StartDate").val(startDate);
                                                $("#txtDuration").val(duration);
                                                $("#p_PeriodNotes").val(periodNotes);

                                    $("#p_AlertDate").val(alertDate);
                                    $("#OtherEmailAddress").val(emailAddress);

                                                $('#modal-new-period').modal('show');

                                            }

                                            function deletePeriod(periodId, propertyId) {
                                                if (confirm("Confirm Delete?")) {
                                                    window.location.href = '@Url.Action("DeletePeriod", "NewPropertyDashboard")?periodId=' + periodId + '&propertyId=' + propertyId;
                                                }

                                            }

                                    </script>

                                    <div class="col-sm-8">
                                        <!-- radio -->
                                        <div class="form-group clearfix">

                                            @{
                                                if (Model.AssetTypeId == 1)
                                                {
                                                    <div class="icheck-success d-inline">
                                                        <input type="radio" name="r3" id="radioLease" checked>
                                                        <label for="radioLease">
                                                            Lease
                                                        </label>
                                                    </div>
                                                }
                                                else if (Model.AssetTypeId == 2)
                                                {
                                                    <div class="icheck-success d-inline">
                                                        <input type="radio" name="r3" checked id="radioAcquisition" checked>
                                                        <label for="radioAcquisition">
                                                            Purchase
                                                        </label>
                                                    </div>
                                                }
                                                else if (Model.AssetTypeId == 5)
                                                {
                                                    <div class="icheck-success d-inline">
                                                        <input type="radio" name="r3" id="radioLeaseWithPurchase" checked>
                                                        <label for="radioLeaseWithPurchase">
                                                            Lease/Option Purchase Details
                                                        </label>
                                                    </div>
                                                }
                                                else if (Model.AssetTypeId == 7)
                                                {
                                                    <div class="icheck-success d-inline">
                                                        <input type="radio" name="r3" id="radioPurchaseLeaseBack" checked>
                                                        <label for="radioPurchaseLeaseBack">
                                                            Purchase/ Leaseback
                                                        </label>
                                                    </div>
                                                }
                                            }

                                        </div>
                                    </div>



                                    <div class="row">
                                        <div class="col-12 col-sm-4">

                                            @{
                                                if (Model.AssetTypeId == 1)
                                                {
                                                    <form asp-action="SaveDiligenceLease" id="SaveDiligenceLease" name="SaveDiligenceLease" method="post" enctype="multipart/form-data">

                                                        <div class="col-12" id="divLease">

                                                            <div class="card card-info">
                                                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <h3 class="card-title">Lease Details</h3>
                                                                        </div>

                                                                    </div>

                                                                </div>
                                                                <div class="card-body">


                                                                    <div class="form-group">
                                                                        <label for="Tenant" class="control-label">Tenant Entity</label>
                                                                        <input type="text" name="Tenant" value="@Model.DiligenceLease.Tenant" class="form-control" />
                                                                        <div id="errPurchasePrice"></div>
                                                                        <input type="hidden" value="@Model.DiligenceLease.DiligenceLeaseId" name="DiligenceDispositionsId" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceLease.PropertyType" name="PropertyType" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceLease.PropertyId" name="PropertyId" class="form-control" />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="Rent" class="control-label">Rent</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" name="Rent" value="@Model.DiligenceLease.Rent" class="form-control" />
                                                                        </div>
                                                                    </div>

                                                                    @{
                                                                        //var dtUnderContractDateLease = Model.DiligenceLease.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceLease.UnderContractDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtUnderContractDateLease = Model.DiligenceLease.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceLease.UnderContractDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_UnderContractDate_lease" class="control-label">Under Contract Date </label>
                                                                    <input type="text" name="UnderContractDate" value="@dtUnderContractDateLease" class="form-control" id="p_UnderContractDate_lease" readonly />
                                                                    
                                                                    <a href="javascript:clearUnderContractDate_lease()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearUnderContractDate_lease() {
                                                                            $("#p_UnderContractDate_lease").val('');
                                                                        }
                                                                    </script>

                                                                    @{
                                                                        //var dtDueDiligenceExpiryDateLease = Model.DiligenceLease.DueDiligenceExpiryDate == default(DateTime?) ? "" : Model.DiligenceLease.DueDiligenceExpiryDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtDueDiligenceExpiryDateLease = Model.DiligenceLease.DueDiligenceExpiryDate == default(DateTime?) ? "" : Model.DiligenceLease.DueDiligenceExpiryDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_DueDiligenceExpairyDate_lease" class="control-label">DDP Expiration Date</label>
                                                                    <input type="text" value="@dtDueDiligenceExpiryDateLease" name="DueDiligenceExpiryDate" class="form-control" id="p_DueDiligenceExpairyDate_lease" readonly />
                                                                    <a href="javascript:markDate('p_DueDiligenceExpairyDate_lease')">Mark Date</a> |
                                                                    <a href="javascript:DueDiligenceExpairyDate_lease()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function DueDiligenceExpairyDate_lease() {
                                                                            $("#p_DueDiligenceExpairyDate_lease").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceLease.EarnestMoneyDeposit" class="control-label">Earnest Money Deposit</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" value="@Model.DiligenceLease.EarnestMoneyDeposit" name="EarnestMoneyDeposit" class="form-control" />
                                                                        </div>

                                                                    </div>

                                                                    @{
                                                                        //var dtDDPExtensionLease = Model.DiligenceLease.DDPExtension == default(DateTime?) ? "" : Model.DiligenceLease.DDPExtension.Value.ToString("yyyy-MM-dd");
                                                                        var dtDDPExtensionLease = Model.DiligenceLease.DDPExtension == default(DateTime?) ? "" : Model.DiligenceLease.DDPExtension.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label asp-for="DiligenceLease.DDPExtension" class="control-label">DDP Extension</label>
                                                                    <input type="text" value="@dtDDPExtensionLease" name="DDPExtension" class="form-control" id="p_DDPExtension_lease" readonly />
                                                                    <a href="javascript:markDate('p_DDPExtension_lease')">Mark Date</a> |
                                                                    <a href="javascript:clearDDPExtension_lease()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearDDPExtension_lease() {
                                                                            $("#p_DDPExtension_lease").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLease.TenantAttorney" class="control-label">Tenant Attorney</label>
                                                                        <input type="text" value="@Model.DiligenceLease.TenantAttorney" name="TenantAttorney" class="form-control" @disableDisposition />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLease.TenantAgentCommission" class="control-label">Tenant Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceLease.TenantAgentCommission" name="TenantAgentCommission" class="form-control" @disableDisposition />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLease.LandlordAgentCommission" class="control-label">Landlord Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceLease.LandlordAgentCommission" name="LandlordAgentCommission" class="form-control" @disableDisposition />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLease.LeaseSecurityDeposit" class="control-label">Lease Security Deposit</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" value="@Model.DiligenceLease.LeaseSecurityDeposit" name="LeaseSecurityDeposit" class="form-control" @disableDisposition />
                                                                        </div>

                                                                    </div>
                                                                    @{
                                                                        //var dtLeaseCommencementDate = Model.DiligenceLease.LeaseCommencementDate == default(DateTime?) ? "" : Model.DiligenceLease.LeaseCommencementDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtLeaseCommencementDate = Model.DiligenceLease.LeaseCommencementDate == default(DateTime?) ? "" : Model.DiligenceLease.LeaseCommencementDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_LeaseCommencementDate" class="control-label">Lease Commencement Date</label>
                                                                    <input type="text" value="@dtLeaseCommencementDate" name="LeaseCommencementDate" class="form-control" id="p_LeaseCommencementDate" readonly @disableDisposition />
                                                                    <a href="javascript:markDate('p_LeaseCommencementDate')">Mark Date</a> |
                                                                    <a href="javascript:clearLeaseCommencementDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearLeaseCommencementDate() {
                                                                            $("#").val('');
                                                                        }
                                                                    </script>

                                                                    @{
                                                                        //var dtclosingDateDisp = Model.DiligenceLease.ClosingDate == default(DateTime?) ? "" : Model.DiligenceLease.ClosingDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtclosingDateDisp = Model.DiligenceLease.ClosingDate == default(DateTime?) ? "" : Model.DiligenceLease.ClosingDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <!-- /.Due diligence new fields -->
                                                                <div class="form-group">
                                                                    <label for="p_ClosingDate" class="control-label">Closing Date </label>
                                                                    <input type="text" name="ClosingDate" value="@dtclosingDateDisp" class="form-control" id="p_ClosingDate" readonly />
                                                                    <a href="javascript:markDate('p_ClosingDate')">Mark Date</a> |
                                                                    <a href="javascript:clearClosingDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearClosingDate() {
                                                                            $("#").val('');
                                                                        }
                                                                    </script>

                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <div class="form-group">
                                                                            <input type="button" id="btnSave" value="Save" class="btn btn-primary" onclick="saveDiligenceLease();" />

                                                                        </div>
                                                                    }

                                                                </div>
                                                                <!-- /.card-body -->
                                                            </div>

                                                        </div>

                                                    </form>


                                                }
                                                else if (Model.AssetTypeId == 2)
                                                {

                                                    <form asp-action="SaveDiligenceAcquisition" id="SaveDiligenceAcquisition" name="SaveDiligenceAcquisition" method="post" enctype="multipart/form-data">

                                                        <div class="col-12" id="divAcquisitions">

                                                            <div class="card card-info">
                                                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <h3 class="card-title">Acquisition Details</h3>
                                                                        </div>

                                                                    </div>

                                                                </div>
                                                                <div class="card-body">

                                                                    <!--
                                                                                                                                        @if (Model.DiligenceAcquisitions.AcquisitionStatus == 1)
                                                                                                                                        {
                                                                                                                                            <div class="form-group">
                                                                                                                                                <label for="EarnestMoney" class="control-label"> <font color="red">Status : Closed</font></label>
                                                                                                                                            </div>
                                                                                                                                        }
                                                                                                                                        else if (Model.DiligenceAcquisitions.AcquisitionStatus == 2)
                                                                                                                                        {
                                                                                                                                            <div class="form-group">
                                                                                                                                                <label for="EarnestMoney" class="control-label"> <font color="red">Status : Terminated</font> </label>
                                                                                                                                            </div>
                                                                                                                                        }
                                                                    -->

                                                                    <div class="form-group">
                                                                        <label for="PurchasePrice" class="control-label">Purchase Price</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" name="PurchasePrice" value="@Model.DiligenceAcquisitions.PurchasePrice" class="form-control" />
                                                                        </div>


                                                                        <div id="errPurchasePrice"></div>
                                                                        <input type="hidden" value="@Model.DiligenceAcquisitions.DiligenceAcquisitionId" name="DiligenceAcquisitionId" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceAcquisitions.PropertyType" name="PropertyType" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceAcquisitions.PropertyId" name="PropertyId" class="form-control" />
                                                                    </div>

                                                                    @{
                                                                        //var dtUnderContractDateAcq = Model.DiligenceAcquisitions.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceAcquisitions.UnderContractDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtUnderContractDateAcq = Model.DiligenceAcquisitions.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceAcquisitions.UnderContractDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_UnderContractDate" class="control-label">Under Contract Date </label>
                                                                    <input type="text" name="UnderContractDate" value="@dtUnderContractDateAcq" class="form-control" id="p_UnderContractDate" readonly />
                                                                    
                                                                    <a href="javascript:clearUnderContractDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearUnderContractDate() {
                                                                            $("#p_UnderContractDate").val('');
                                                                        }
                                                                    </script>

                                                                    @{
                                                                        //var dtDueDiligenceExpairyDateAcq = Model.DiligenceAcquisitions.DueDiligenceExpairyDate == default(DateTime?) ? "" : Model.DiligenceAcquisitions.DueDiligenceExpairyDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtDueDiligenceExpairyDateAcq = Model.DiligenceAcquisitions.DueDiligenceExpairyDate == default(DateTime?) ? "" : Model.DiligenceAcquisitions.DueDiligenceExpairyDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_DueDiligenceExpairyDate" class="control-label">DDP Expiration Date</label>
                                                                    <input type="text" value="@dtDueDiligenceExpairyDateAcq" name="DueDiligenceExpairyDate" class="form-control" id="p_DueDiligenceExpairyDate" readonly />
                                                                    <a href="javascript:markDate('p_DueDiligenceExpairyDate')">Mark Date</a> |
                                                                    <a href="javascript:clearDueDiligenceExpairyDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearDueDiligenceExpairyDate() {
                                                                            $("#p_DueDiligenceExpairyDate").val('');
                                                                        }
                                                                    </script>


                                                                    <div class="form-group">
                                                                        <label for="EarnestMoney" class="control-label">Earnest Money Deposit</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" value="@Model.DiligenceAcquisitions.EarnestMoney" name="EarnestMoney" class="form-control" />
                                                                        </div>


                                                                        <div id="errPurchasePrice"></div>
                                                                    </div>

                                                                    @{
                                                                        //var dtDDPExtensionAcq = Model.DiligenceAcquisitions.DDPExtension == default(DateTime?) ? "" : Model.DiligenceAcquisitions.DDPExtension.Value.ToString("yyyy-MM-dd");
                                                                        var dtDDPExtensionAcq = Model.DiligenceAcquisitions.DDPExtension == default(DateTime?) ? "" : Model.DiligenceAcquisitions.DDPExtension.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <div class="form-group">
                                                                        <label for="DDPExtension" class="control-label">DDP Extension</label>
                                                                        <input type="text" value="@dtDDPExtensionAcq" name="DDPExtension" class="form-control" id="p_DDPExtension" readonly />
                                                                        <a href="javascript:clearDDPExtension()">Clear Date</a>
                                                                    </div>
                                                                    <script>
                                                                        function clearDDPExtension() {
                                                                            $("#p_DDPExtension").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <div class="icheck-success d-inline">
                                                                            <input type="checkbox" name="ddpExtensionNotApplicable" id="radioDDPExtension1" onchange="ddpExtensionNotApplicable1(this.value)" @diligenceOpted>
                                                                            <label for="radioDDPExtension1">
                                                                                Check If DDP Extension Not Applicable
                                                                            </label>
                                                                        </div>
                                                                        <input type="hidden" name="DDPExtensionOpted" id="DDPExtensionOpted" value="@Model.DiligenceAcquisitions.DDPExtensionOpted" />

                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="AdditionalEarnestMoneyDeposit" class="control-label">Additional Earnest Money Deposit</label>


                                                                        <div class="input-group mb-3">

                                                                            <input type="text" value="@Model.DiligenceAcquisitions.AdditionalEarnestMoneyDeposit" name="AdditionalEarnestMoneyDeposit" class="form-control" />
                                                                        </div>

                                                                        <div id="errPurchasePrice"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="PermittingPeriod" class="control-label">Permitting Period (If Applicable)</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.PermittingPeriod" name="PermittingPeriod" class="form-control" />
                                                                        <div id="errPurchasePrice"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="BuyingEntity" class="control-label">Buying Entity</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.BuyingEntity" name="BuyingEntity" class="form-control" />
                                                                        <div id="errPurchasePrice"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="EscrowAgent" class="control-label">Escrow Agent</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.EscrowAgent" name="EscrowAgent" class="form-control" />
                                                                        <div id="errEscrowAgent"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="BuyersAttorney" class="control-label">Buyer's Attorney</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.BuyersAttorney" name="BuyersAttorney" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="SellersAttorney" class="control-label">Seller's Attorney</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.SellersAttorney" name="SellersAttorney" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="BuyersAgentCommission" class="control-label">Buyer's Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.BuyersAgentCommission" name="BuyersAgentCommission" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="SellersAgentCommission" class="control-label">Seller's Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.SellersAgentCommission" name="SellersAgentCommission" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceAcquisitions.Exchage1031" class="control-label">1031 Exchange</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.Exchage1031" name="Exchage1031" class="form-control" @disableAcquisition />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceAcquisitions.Deadline1031" class="control-label">1031 Deadline</label>
                                                                        <input type="text" value="@Model.DiligenceAcquisitions.Deadline1031" name="Deadline1031" class="form-control" @disableAcquisition />
                                                                        <div id="errDeadline1031"></div>
                                                                    </div>

                                                                    <!--
                                                                    <div class="form-group">
                                                                        <label for="selTransactionStatusId" class="control-label">Transaction Status</label>
                                                                        <select id="selTransactionStatusId" name="AcquisitionStatus" class="form-select form-control">
                                                                            <option value="0">--- Select ---</option>
                                                                            @if (Model != null)
                                                                            {
                                                                                foreach (var itemSel in Model.DiligenceAcquisitions.TransactionStatusList)
                                                                                {
                                                                                    if (Model.DiligenceAcquisitions.AcquisitionStatus == itemSel.TransactionStatusId)
                                                                                    {
                                                                                        <option selected value="@itemSel.TransactionStatusId">@itemSel.TransactionStatusName</option>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <option value="@itemSel.TransactionStatusId">@itemSel.TransactionStatusName</option>
                                                                                    }

                                                                                }
                                                                            }

                                                                        </select>
                                                                    </div>
                                                                        -->


                                                                    @{
                                                                        //var dtclosingDateDisp = Model.DiligenceAcquisitions.ClosingDate == default(DateTime?) ? "" : Model.DiligenceAcquisitions.ClosingDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtclosingDateDisp = Model.DiligenceAcquisitions.ClosingDate == default(DateTime?) ? "" : Model.DiligenceAcquisitions.ClosingDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <!-- /.Due diligence new fields -->
                                                                <div class="form-group">
                                                                    <label for="p_ClosingDate" class="control-label">Closing Date </label>
                                                                    <input type="text" name="ClosingDate" value="@dtclosingDateDisp" class="form-control" id="p_ClosingDate" readonly />
                                                                    <a href="javascript:markDate('p_ClosingDate')">Mark Date</a> |
                                                                    <a href="javascript:clearClosingDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearClosingDate() {
                                                                            $("#p_ClosingDate").val('');
                                                                        }
                                                                    </script>



                                                                    <div class="form-group">
                                                                        @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                        {
                                                                            <input type="button" id="btnSave" value="Save" class="btn btn-primary" onclick="saveDiligenceAcquire();" />
                                                                        }


                                                                    </div>

                                                                </div>
                                                                <!-- /.card-body -->
                                                            </div>

                                                        </div>

                                                    </form>




                                                }
                                                else if (Model.AssetTypeId == 5)
                                                {
                                                    <form asp-action="SaveDiligenceLeaseWithPurchase" id="SaveDiligenceLeaseWithPurchase" name="SaveDiligenceLeaseWithPurchase" method="post" enctype="multipart/form-data">

                                                        <div class="col-12" id="divLeaseWithPurchase">

                                                            <div class="card card-info">
                                                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <h3 class="card-title">Lease with Purchase Details</h3>
                                                                        </div>

                                                                    </div>

                                                                </div>
                                                                <div class="card-body">


                                                                    <div class="form-group">
                                                                        <label for="Tenant" class="control-label">Tenant Entity</label>
                                                                        <input type="text" name="Tenant" value="@Model.DiligenceLeaseWithPurchase.Tenant" class="form-control" />
                                                                        <div id="errPurchasePrice"></div>
                                                                        <input type="hidden" value="@Model.DiligenceLeaseWithPurchase.DiligenceLeaseWithPurchaseId" name="DiligenceDispositionsId" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceLeaseWithPurchase.PropertyType" name="PropertyType" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceLeaseWithPurchase.PropertyId" name="PropertyId" class="form-control" />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="Rent" class="control-label">Rent</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" name="Rent" value="@Model.DiligenceLeaseWithPurchase.Rent" class="form-control" />
                                                                        </div>


                                                                    </div>

                                                                    @{
                                                                        //var dtUnderContractDateLeaseWithPurchase = Model.DiligenceLeaseWithPurchase.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.UnderContractDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtUnderContractDateLeaseWithPurchase = Model.DiligenceLeaseWithPurchase.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.UnderContractDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_UnderContractDate_lease_with_purchase" class="control-label">Under Contract Date </label>
                                                                    <input type="text" name="UnderContractDate" value="@dtUnderContractDateLeaseWithPurchase" class="form-control" id="p_UnderContractDate_lease_with_purchase" readonly />
                                                                    
                                                                    <a href="javascript:clearUnderContractDate_lease()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearUnderContractDate_lease() {
                                                                            $("#p_UnderContractDate_lease_with_purchase").val('');
                                                                        }
                                                                    </script>

                                                                    @{
                                                                        //var dtDueDiligenceExpiryDateLeaseWithPurchase = Model.DiligenceLeaseWithPurchase.DueDiligenceExpiryDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.DueDiligenceExpiryDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtDueDiligenceExpiryDateLeaseWithPurchase = Model.DiligenceLeaseWithPurchase.DueDiligenceExpiryDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.DueDiligenceExpiryDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_DueDiligenceExpairyDate_lease_with_purchase" class="control-label">DDP Expiration Date</label>
                                                                    <input type="text" value="@dtDueDiligenceExpiryDateLeaseWithPurchase" name="DueDiligenceExpiryDate" class="form-control" id="p_DueDiligenceExpairyDate_lease_with_purchase" readonly />
                                                                    <a href="javascript:markDate('p_DueDiligenceExpairyDate_lease_with_purchase')">Mark Date</a> |
                                                                    <a href="javascript:DueDiligenceExpairyDate_lease()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function DueDiligenceExpairyDate_lease() {
                                                                            $("#p_DueDiligenceExpairyDate_lease_with_purchase").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceLeaseWithPurchase.EarnestMoneyDeposit" class="control-label">Earnest Money Deposit</label>


                                                                        <div class="input-group mb-3">

                                                                            <input type="text" value="@Model.DiligenceLeaseWithPurchase.EarnestMoneyDeposit" name="EarnestMoneyDeposit" class="form-control" />
                                                                        </div>

                                                                    </div>

                                                                    @{
                                                                        //var dtDDPExtensionLeaseWithPurchase = Model.DiligenceLeaseWithPurchase.DDPExtension == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.DDPExtension.Value.ToString("yyyy-MM-dd");
                                                                        var dtDDPExtensionLeaseWithPurchase = Model.DiligenceLeaseWithPurchase.DDPExtension == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.DDPExtension.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label asp-for="DiligenceLeaseWithPurchase.DDPExtension" class="control-label">DDP Extension</label>
                                                                    <input type="text" value="@dtDDPExtensionLeaseWithPurchase" name="DDPExtension" class="form-control" id="p_DDPExtension_lease_with_purchase" readonly />
                                                                    <a href="javascript:markDate('p_DDPExtension_lease_with_purchase')">Mark Date</a> |
                                                                    <a href="javascript:clearDDPExtension_lease()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearDDPExtension_lease() {
                                                                            $("#p_DDPExtension_lease_with_purchase").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLeaseWithPurchase.TenantAttorney" class="control-label">Tenant Attorney</label>
                                                                        <input type="text" value="@Model.DiligenceLeaseWithPurchase.TenantAttorney" name="TenantAttorney" class="form-control" @disableDisposition />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLeaseWithPurchase.TenantAgentCommission" class="control-label">Tenant Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceLeaseWithPurchase.TenantAgentCommission" name="TenantAgentCommission" class="form-control" @disableDisposition />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLeaseWithPurchase.LandlordAgentCommission" class="control-label">Landlord Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceLeaseWithPurchase.LandlordAgentCommission" name="LandlordAgentCommission" class="form-control" @disableDisposition />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceLeaseWithPurchase.LeaseSecurityDeposit" class="control-label">Lease Security Deposit</label>

                                                                        <div class="input-group mb-3">

                                                                            <input type="text" value="@Model.DiligenceLeaseWithPurchase.LeaseSecurityDeposit" name="LeaseSecurityDeposit" class="form-control" @disableDisposition />
                                                                        </div>


                                                                    </div>
                                                                    @{
                                                                        //var dtLeaseCommencementDateWithPurchase = Model.DiligenceLeaseWithPurchase.LeaseCommencementDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.LeaseCommencementDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtLeaseCommencementDateWithPurchase = Model.DiligenceLeaseWithPurchase.LeaseCommencementDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.LeaseCommencementDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_LeaseCommencementDate" class="control-label">Lease Commencement Date</label>
                                                                    <input type="text" value="@dtLeaseCommencementDateWithPurchase" name="LeaseCommencementDate" class="form-control" id="p_LeaseCommencementDate_with_purchase" readonly @disableDisposition />
                                                                    <a href="javascript:markDate('p_LeaseCommencementDate_with_purchase')">Mark Date</a> |
                                                                    <a href="javascript:clearLeaseCommencementDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearLeaseCommencementDate() {
                                                                            $("#p_LeaseCommencementDate_with_purchase").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <label asp-for="@Model.DiligenceLeaseWithPurchase.OptionPrice" class="control-label">Option Price</label>

                                                                        <div class="input-group mb-3">
                                                                            <input type="text" value="@Model.DiligenceLeaseWithPurchase.OptionPrice" name="OptionPrice" class="form-control" />
                                                                        </div>
                                                                    </div>

                                                                    @{
                                                                        //var dtOptionPurchaseDate = Model.DiligenceLeaseWithPurchase.OptionPurchaseDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.OptionPurchaseDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtOptionPurchaseDate = Model.DiligenceLeaseWithPurchase.OptionPurchaseDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.OptionPurchaseDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_OptionPurchaseDate" class="control-label">Option Purchase Date</label>
                                                                    <input type="text" value="@dtOptionPurchaseDate" name="OptionPurchaseDate" class="form-control" id="p_OptionPurchaseDate" readonly />
                                                                    <a href="javascript:markDate('p_OptionPurchaseDate')">Mark Date</a> |
                                                                    <a href="javascript:clearOptionPurchaseDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearOptionPurchaseDate() {
                                                                            $("#p_OptionPurchaseDate").val('');
                                                                        }
                                                                    </script>

                                                                    @{
                                                                        //var dtclosingDateDisp = Model.DiligenceLeaseWithPurchase.ClosingDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.ClosingDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtclosingDateDisp = Model.DiligenceLeaseWithPurchase.ClosingDate == default(DateTime?) ? "" : Model.DiligenceLeaseWithPurchase.ClosingDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <!-- /.Due diligence new fields -->
                                                                <div class="form-group">
                                                                    <label for="p_ClosingDate" class="control-label">Closing Date </label>
                                                                    <input type="text" name="ClosingDate" value="@dtclosingDateDisp" class="form-control" id="p_ClosingDate" readonly />
                                                                    <a href="javascript:markDate('p_ClosingDate')">Mark Date</a> |
                                                                    <a href="javascript:clearClosingDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearClosingDate() {
                                                                            $("#p_ClosingDate").val('');
                                                                        }
                                                                    </script>

                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <div class="form-group">
                                                                            <input type="button" id="btnSave" value="Save" class="btn btn-primary" onclick="saveDiligenceLeaseWithPurchase();" />

                                                                        </div>
                                                                    }



                                                                </div>
                                                                <!-- /.card-body -->
                                                            </div>

                                                        </div>

                                                    </form>
                                                }
                                                else if (Model.AssetTypeId == 7)
                                                {
                                                    <form asp-action="SaveDiligenceDispositions_SaleLeaseBack" id="SaveDiligenceDispositions_SaleLeaseBack" name="SaveDiligenceDispositions_SaleLeaseBack" method="post" enctype="multipart/form-data">
                                                        <div class="col-12" id="divLeaseWithPurchase">

                                                            <div class="card card-info">
                                                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                                    <div class="row">
                                                                        <div class="col-6">
                                                                            <h3 class="card-title">Purchase/ Leaseback</h3>
                                                                        </div>

                                                                    </div>

                                                                </div>
                                                                <div class="card-body">


                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceDispositions_PurchaseLeaseBack.Buyers" class="control-label">Buyer</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.Buyers" name="Buyers" class="form-control" />

                                                                        <input type="hidden" value="@Model.DiligenceDispositions_PurchaseLeaseBack.DiligenceDispositionsId" name="DiligenceDispositionsId" class="form-control" />
                                                                        <input type="hidden" value="@Model.DiligenceDispositions_PurchaseLeaseBack.PropertyType" name="PropertyType" class="form-control" />
                                                                        <input type="hidden" value="@Model.SiteDetailsId" name="PropertyId" class="form-control" />
                                                                    </div>

                                                                    <!--
                                                                                                                                        @if (Model.DiligenceDispositions_PurchaseLeaseBack.DispositionStatus == 1)
                                                                                                                                        {
                                                                                                                                            <div class="form-group">
                                                                                                                                                <label for="EarnestMoney" class="control-label"> <font color="red">Status : Closed</font></label> <br />
                                                                                                                                                <label for="EarnestMoney" class="control-label"> <font color="red">Date : @Model.DiligenceDispositions_PurchaseLeaseBack.ClosedDate.ToString("MM-dd-yyyy")</font></label>
                                                                                                                                            </div>
                                                                                                                                        }
                                                                                                                                        else if (Model.DiligenceDispositions_PurchaseLeaseBack.DispositionStatus == 2)
                                                                                                                                        {
                                                                                                                                            <div class="form-group">
                                                                                                                                                <label for="EarnestMoney" class="control-label"> <font color="red">Status : Terminated</font> </label> <br />
                                                                                                                                                <label for="EarnestMoney" class="control-label"> <font color="red">Date : @Model.DiligenceDispositions_PurchaseLeaseBack.TerminatedDate.ToString("MM-dd-yyyy")</font></label>
                                                                                                                                            </div>
                                                                                                                                        }
                                                                    -->

                                                                    <div class="form-group">
                                                                        <label for="PurchasePrice" class="control-label">Purchase Price</label>
                                                                        <div class="input-group mb-3">
                                                                            <!--
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text">$</span>
                                                                            </div>
                                                                            <input type="text" name="SalePrice" value="@Model.DiligenceDispositions_PurchaseLeaseBack.SalePrice" class="form-control" onkeypress="return numericFilter(event);" />
                                                                            -->
                                                                            <input type="text" name="SalePrice" value="@Model.DiligenceDispositions_PurchaseLeaseBack.SalePrice" class="form-control" />

                                                                        </div>

                                                                    </div>


                                                                    @{
                                                                        //var dtUnderContractDateDisp = Model.DiligenceDispositions_PurchaseLeaseBack.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.UnderContractDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtUnderContractDateDisp = Model.DiligenceDispositions_PurchaseLeaseBack.UnderContractDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.UnderContractDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <!-- /.Due diligence new fields -->
                                                                    <div class="form-group">
                                                                        <label for="p_UnderContractDate" class="control-label">Under Contract Date </label>
                                                                        <input type="text" name="UnderContractDate" value="@dtUnderContractDateDisp" class="form-control" id="p_UnderContractDate" readonly />
                                                                        <a href="javascript:clearUnderContractDate()">Clear Date</a>
                                                                    </div>
                                                                    <script>
                                                                        function clearUnderContractDate() {
                                                                            $("#p_UnderContractDate").val('');
                                                                        }
                                                                    </script>

                                                                    @{
                                                                        //var dtDueDiligenceExpairyDateDisp = Model.DiligenceDispositions_PurchaseLeaseBack.DueDiligenceExpairyDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.DueDiligenceExpairyDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtDueDiligenceExpairyDateDisp = Model.DiligenceDispositions_PurchaseLeaseBack.DueDiligenceExpairyDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.DueDiligenceExpairyDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label for="p_DueDiligenceExpairyDate" class="control-label">DDP Expiration Date</label>
                                                                    <input type="text" value="@dtDueDiligenceExpairyDateDisp" name="DueDiligenceExpairyDate" class="form-control" id="p_DueDiligenceExpairyDate" readonly />
                                                                    <a href="javascript:markDate('p_DueDiligenceExpairyDate')">Mark Date</a> |
                                                                    <a href="javascript:clearDueDiligenceExpairyDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearDueDiligenceExpairyDate() {
                                                                            $("#p_DueDiligenceExpairyDate").val('');
                                                                        }
                                                                    </script>

                                                                    <!--
                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceDispositions.DueDiligenceAmount" class="control-label">Due Diligence Amount</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.DueDiligenceAmount" name="DueDiligenceAmount" class="form-control"  />
                                                                    </div>
                                                                    -->

                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceDispositions_PurchaseLeaseBack.EMD" class="control-label">Earnest Money Deposit</label>
                                                                        <div class="input-group mb-3">
                                                                            <!--

                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text">$</span>
                                                                            </div>
                                                                            <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.EMD" name="EMD" class="form-control" onkeypress="return numericFilter(event);" />
                                                                            -->
                                                                            <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.EMD" name="EMD" class="form-control" />

                                                                        </div>

                                                                    </div>


                                                                    @{
                                                                        //var dtDDPExtensionDisp = Model.DiligenceDispositions_PurchaseLeaseBack.DDPExtension == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.DDPExtension.Value.ToString("yyyy-MM-dd");
                                                                        var dtDDPExtensionDisp = Model.DiligenceDispositions_PurchaseLeaseBack.DDPExtension == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.DDPExtension.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                <div class="form-group">
                                                                    <label asp-for="DiligenceDispositions_PurchaseLeaseBack.DDPExtension" class="control-label">DDP Extension</label>
                                                                    <input type="text" value="@dtDDPExtensionDisp" name="DDPExtension" class="form-control" id="p_DDPExtension" readonly />
                                                                    <a href="javascript:markDate('p_DDPExtension')">Mark Date</a> |
                                                                    <a href="javascript:clearDDPExtension()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearDDPExtension() {
                                                                            $("#p_DDPExtension").val('');
                                                                        }
                                                                    </script>

                                                                    <div class="form-group">
                                                                        <div class="icheck-success d-inline">
                                                                            <input type="checkbox" name="ddpExtensionNotApplicable" id="radioDDPExtension" onchange="ddpExtensionNotApplicable1(this.value)" @diligenceOpted>
                                                                            <label for="radioDDPExtension">
                                                                                Check If DDP Extension Not Applicable
                                                                            </label>
                                                                        </div>
                                                                        <input type="hidden" name="DDPExtensionOpted" id="DDPExtensionOpted" value="@Model.DiligenceDispositions_PurchaseLeaseBack.DDPExtensionOpted" />
                                                                    </div>





                                                                    <div class="form-group">
                                                                        <label for="EarnestMoney" class="control-label">Additional Earnest Money Deposit</label>


                                                                        <div class="input-group mb-3">
                                                                            <!--
                                                                            <div class="input-group-prepend">
                                                                                <span class="input-group-text">$</span>
                                                                            </div>
                                                                            <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.EarnestMoney" name="EarnestMoney" class="form-control" onkeypress="return numericFilter(event);" />
                                                                            -->
                                                                            <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.EarnestMoney" name="EarnestMoney" class="form-control" />

                                                                        </div>

                                                                        <div id="errPurchasePrice"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="PermittingPeriod" class="control-label">Permitting Period (If Applicable)</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.PermittingPeriod" name="PermittingPeriod" class="form-control" />
                                                                        <div id="errPurchasePrice"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="Rent_SaleLeaseBack" class="control-label">Rent</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.Rent_SaleLeaseBack" name="Rent_SaleLeaseBack" class="form-control" />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="Term_SaleLeaseBack" class="control-label">Term</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.Term_SaleLeaseBack" name="Term_SaleLeaseBack" class="form-control" />
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="selLeaseType" class="control-label">Lease Type</label>
                                                                        <select id="selLeaseType" name="LeaseType_SaleLeaseBack" class="form-select form-control">
                                                                            <option value="0">--- Select ---</option>
                                                                            @if (Model != null)
                                                                            {
                                                                                foreach (var itemSel in Model.LeaseTypeList)
                                                                                {
                                                                                    if (Model.DiligenceDispositions_PurchaseLeaseBack.LeaseType_SaleLeaseBack == itemSel.LeaseTypeId)
                                                                                    {
                                                                                        <option selected value="@itemSel.LeaseTypeId">@itemSel.LeaseType</option>
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                        <option value="@itemSel.LeaseTypeId">@itemSel.LeaseType</option>
                                                                                    }
                                                                                }
                                                                            }
                                                                        </select>
                                                                    </div>

                                                                    @{
                                                                        //var dtLeaseCommencementDate = Model.DiligenceDispositions_PurchaseLeaseBack.LeaseCommencementDate_SaleLeaseBack == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.LeaseCommencementDate_SaleLeaseBack.Value.ToString("yyyy-MM-dd");
                                                                        var dtLeaseCommencementDate = Model.DiligenceDispositions_PurchaseLeaseBack.LeaseCommencementDate_SaleLeaseBack == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.LeaseCommencementDate_SaleLeaseBack.Value.ToString("MM-dd-yyyy");
                                                                                                                                        <div class="form-group">
                                                                                                                                            <label for="p_LeaseCommencementDate" class="control-label">Lease Commencement Date</label>
                                                                                                                                            <input type="text" value="@dtLeaseCommencementDate" name="LeaseCommencementDate_SaleLeaseBack" class="form-control" id="p_LeaseCommencementDate" readonly />
                                                                                                                                            <a href="javascript:markDate('p_LeaseCommencementDate')">Mark Date</a> |
                                                                                                                                            <a href="javascript:clearLeaseCommencementDate()">Clear Date</a>
                                                                                                                                        </div>
                                                                        <script>
                                                                            function clearLeaseCommencementDate() {
                                                                                $("#p_LeaseCommencementDate").val('');
                                                                            }
                                                                        </script>

                                                                    }


                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceDispositions_PurchaseLeaseBack.EscrowAgent" class="control-label">Escrow Agent</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.EscrowAgent" name="EscrowAgent" class="form-control" />
                                                                        <div id="errEscrowAgent"></div>
                                                                    </div>



                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceDispositions_PurchaseLeaseBack.BuyersAttorney" class="control-label">Buyer's Attorney</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.BuyersAttorney" name="BuyersAttorney" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceDispositions_PurchaseLeaseBack.SellersAttorney" class="control-label">Seller's Attorney</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.SellersAttorney" name="SellersAttorney" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceDispositions_PurchaseLeaseBack.BuyersAgentCommission" class="control-label">Buyer's Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.BuyersAgentCommission" name="BuyersAgentCommission" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="@Model.DiligenceDispositions_PurchaseLeaseBack.SellersAgentCommission" class="control-label">Seller's Agent/ Commission</label>
                                                                        <input type="text" value="@Model.DiligenceDispositions_PurchaseLeaseBack.SellersAgentCommission" name="SellersAgentCommission" class="form-control" />
                                                                        <div id="errExchage1031"></div>
                                                                    </div>

                                                                    @if (selTransactionHide.Trim().Length == 0)
                                                                    {
                                                                        <div class="form-group">
                                                                            <label for="selPropertyStatus" class="control-label">Transaction Status</label>
                                                                            <select id="selTransactionStatusId" name="SelectedTransactionStatusId" class="form-select form-control">
                                                                                <option value="0">--- Select ---</option>
                                                                                @if (Model != null)
                                                                                {
                                                                                    foreach (var itemSel in Model.DiligenceDispositions_PurchaseLeaseBack.TransactionStatusList)
                                                                                    {
                                                                                        if (Model.DiligenceDispositions_PurchaseLeaseBack.SelectedTransactionStatusId == itemSel.TransactionStatusId)
                                                                                        {
                                                                                            <option selected value="@itemSel.TransactionStatusId">@itemSel.TransactionStatusName</option>
                                                                                        }
                                                                                        else
                                                                                        {
                                                                                            <option value="@itemSel.TransactionStatusId">@itemSel.TransactionStatusName</option>
                                                                                        }

                                                                                    }
                                                                                }

                                                                            </select>
                                                                        </div>
                                                                    }
                                                                    else
                                                                    {
                                                                        <div class="form-group">
                                                                            <label for="selPropertyStatus" class="control-label">Transaction Status : </label>
                                                                            @{
                                                                                var selValue = 0;
                                                                                var selText = "";

                                                                            }
                                                                            @if (Model != null)
                                                                            {

                                                                                foreach (var itemSel in Model.DiligenceDispositions_PurchaseLeaseBack.TransactionStatusList)
                                                                                {
                                                                                    if (Model.DiligenceDispositions_PurchaseLeaseBack.SelectedTransactionStatusId == itemSel.TransactionStatusId)
                                                                                    {
                                                                                        selText = itemSel.TransactionStatusName;
                                                                                        selValue = itemSel.TransactionStatusId;
                                                                                    }


                                                                                }
                                                                            }
                                                                            @selText
                                                                            <input type="hidden" value="@selValue" name="SelectedTransactionStatusId" />
                                                                        </div>
                                                                    }



                                                                    @{
                                                                        //var dtTransactionStatusChangeDate = Model.DiligenceDispositions_PurchaseLeaseBack.SelectedTransactionDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.SelectedTransactionDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtTransactionStatusChangeDate = Model.DiligenceDispositions_PurchaseLeaseBack.SelectedTransactionDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.SelectedTransactionDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <div class="form-group">
                                                                        <label asp-for="DiligenceDispositions_PurchaseLeaseBack.DispositionTerminatedDate" class="control-label">Status Change Date</label>
                                                                        <input type="text" value="@dtTransactionStatusChangeDate" name="SelectedTransactionDate" class="form-control" id="p_SelectedTransactionDate" readonly />

                                                                        <a href="javascript:cleaStatusChangeDate()">Clear Date</a>
                                                                    </div>
                                                                    <script>
                                                                        function cleaStatusChangeDate() {
                                                                            $("#p_SelectedTransactionDate").val('');
                                                                        }
                                                                    </script>



                                                                    @{
                                                                        //var dtclosingDateDisp = Model.DiligenceDispositions_PurchaseLeaseBack.ClosingDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.ClosingDate.Value.ToString("yyyy-MM-dd");
                                                                        var dtclosingDateDisp = Model.DiligenceDispositions_PurchaseLeaseBack.ClosingDate == default(DateTime?) ? "" : Model.DiligenceDispositions_PurchaseLeaseBack.ClosingDate.Value.ToString("MM-dd-yyyy");
                                                                    }
                                                                    <!-- /.Due diligence new fields -->
                                                                <div class="form-group">
                                                                    <label for="p_ClosingDate" class="control-label">Closing Date </label>
                                                                    <input type="text" name="ClosingDate" value="@dtclosingDateDisp" class="form-control" id="p_ClosingDate" readonly />
                                                                    <a href="javascript:markDate('p_ClosingDate')">Mark Date</a> |
                                                                    <a href="javascript:clearClosingDate()">Clear Date</a>
                                                                </div>
                                                                    <script>
                                                                        function clearClosingDate() {
                                                                            $("#p_ClosingDate").val('');
                                                                        }
                                                                    </script>




                                                                    <input type="hidden" name="Commissions" class="form-control" />


                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <div class="form-group">
                                                                            <input type="button" id="btnSave" value="Save" class="btn btn-primary" onclick="saveDiligenceDispositions_SaleLeaseBack();" />

                                                                        </div>
                                                                    }


                                                                </div>
                                                                <!-- /.card-body -->
                                                            </div>

                                                        </div>
                                                    </form>
                                                }

                                            }








                                        </div>

                                        @{
                                            if (Model.AssetTypeId == 1)
                                            {

                                                <div class="col-12 col-sm-8" id="divTblLease">


                                                    <div class="card card-info">
                                                        <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                            <div class="row">
                                                                <div class="col-10">
                                                                    <h3 class="card-title">Critical Date Tracker</h3>
                                                                </div>
                                                                <div class="col-2">
                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <button type="button" class="btn btn-xs btn-warning" data-toggle="modal" data-target="#modal-new-period">
                                                                            Add New
                                                                        </button>
                                                                    }

                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="card-body">



                                                            <table id="example1_" class="table table-sm text-sm">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Critical Item</th>
                                                                        <th>Duration</th>
                                                                        <th>Start Date</th>
                                                                        <th>End Date</th>
                                                                        <th>Days To Expiry</th>
                                                                        <th>Notes</th>
                                                                        <th>Alert Date</th>
                                                                        <th>Email</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>

                                                                    @foreach (var item in Model.LeasePeriodList)
                                                                    {
                                                                        var dtAlertDate = item.AlertDate == default(DateTime?) ? "" : item.AlertDate.Value.ToString("MM-dd-yyyy");
                                                                        <tr>
                                                                            <td>@item.PeriodMaster</td>
                                                                            <td>@item.Duration</td>
                                                                            <td>@item.StartDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.EndDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.DaysToExpire</td>
                                                                            <td>@item.PeriodNotes</td>

                                                                            <td>@dtAlertDate</td>
                                                                            <td>@item.OtherEmailAddress</td>

                                                                            <td>
                                                                                <div class="btn-group btn-group-sm">

                                                                                    <a href="javascript:editPeriod(@item.PeriodId, '@item.PeriodMaster', '@item.StartDate.ToString("MM-dd-yyyy")', '@item.Duration', '@item.PeriodNotes', '@dtAlertDate', '@item.OtherEmailAddress');" class="btn btn-info"><i class="fas fa-eye"></i></a>
                                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                                    {
                                                                                        <a href="javascript:deletePeriod(@item.PeriodId, @Model.SiteDetailsId)" class="btn btn-danger"><i class="fas fa-trash"></i></a>
                                                                                    }

                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    }

                                                                </tbody>
                                                            </table>






                                                        </div>
                                                        <!-- /.card-body -->
                                                    </div>

                                                </div>

                                            }
                                            else if (Model.AssetTypeId == 2)
                                            {
                                                <div class="col-12 col-sm-8" id="divTblAcquisition">


                                                    <div class="card card-info">
                                                        <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                            <div class="row">
                                                                <div class="col-10">
                                                                    <h3 class="card-title">Critical Date Tracker</h3>
                                                                </div>
                                                                <div class="col-2">
                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <button type="button" class="btn btn-xs btn-warning" data-toggle="modal" data-target="#modal-new-period">
                                                                            Add New
                                                                        </button>
                                                                    }

                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="card-body">



                                                            <table id="example1_" class="table table-sm text-sm">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Critical Item</th>
                                                                        <th>Duration</th>
                                                                        <th>Start Date</th>
                                                                        <th>End Date</th>
                                                                        <th>Days To Expiry</th>
                                                                        <th>Notes</th>
                                                                        <th>Alert Date</th>
                                                                        <th>Email</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>

                                                                    @foreach (var item in Model.AcquisitionPeriodList)
                                                                    {
                                                                        var dtAlertDate = item.AlertDate == default(DateTime?) ? "" : item.AlertDate.Value.ToString("MM-dd-yyyy");
                                                                        <tr>
                                                                            <td>@item.PeriodMaster</td>
                                                                            <td>@item.Duration</td>
                                                                            <td>@item.StartDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.EndDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.DaysToExpire</td>
                                                                            <td>@item.PeriodNotes</td>

                                                                            <td>@dtAlertDate</td>
                                                                            <td>@item.OtherEmailAddress</td>
                                                                            <td>
                                                                                <div class="btn-group btn-group-sm">
                                                                                    <a href="javascript:editPeriod(@item.PeriodId, '@item.PeriodMaster', '@item.StartDate.ToString("MM-dd-yyyy")', '@item.Duration', '@item.PeriodNotes', '@dtAlertDate', '@item.OtherEmailAddress');" class="btn btn-info"><i class="fas fa-eye"></i></a>
                                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                                    {
                                                                                        <a href="javascript:deletePeriod(@item.PeriodId, @Model.SiteDetailsId)" class="btn btn-danger"><i class="fas fa-trash"></i></a>
                                                                                    }

                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    }

                                                                </tbody>
                                                            </table>






                                                        </div>
                                                        <!-- /.card-body -->
                                                    </div>

                                                </div>

                                            }
                                            else if (Model.AssetTypeId == 7)
                                            {
                                                <div class="col-12 col-sm-8" id="divTblLeaseWithPurchse">


                                                    <div class="card card-info">
                                                        <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                            <div class="row">
                                                                <div class="col-10">
                                                                    <h3 class="card-title">Critical Date Tracker</h3>
                                                                </div>
                                                                <div class="col-2">
                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <button type="button" class="btn btn-xs btn-warning" data-toggle="modal" data-target="#modal-new-period">
                                                                            Add New
                                                                        </button>
                                                                    }

                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="card-body">



                                                            <table id="example1_" class="table table-sm text-sm">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Critical Item</th>
                                                                        <th>Duration</th>
                                                                        <th>Start Date</th>
                                                                        <th>End Date</th>
                                                                        <th>Days To Expiry</th>
                                                                        <th>Notes</th>
                                                                        <th>Alert Date</th>
                                                                        <th>Email</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>

                                                                    @foreach (var item in Model.PurchaseLeaseBackPeriodList)
                                                                    {
                                                                        var dtAlertDate = item.AlertDate == default(DateTime?) ? "" : item.AlertDate.Value.ToString("MM-dd-yyyy");
                                                                        <tr>
                                                                            <td>@item.PeriodMaster</td>
                                                                            <td>@item.Duration</td>
                                                                            <td>@item.StartDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.EndDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.DaysToExpire</td>
                                                                            <td>@item.PeriodNotes</td>
                                                                            <td>@dtAlertDate</td>
                                                                            <td>@item.OtherEmailAddress</td>
                                                                            <td>
                                                                                <div class="btn-group btn-group-sm">
                                                                                    <a href="javascript:editPeriod(@item.PeriodId, '@item.PeriodMaster', '@item.StartDate.ToString("MM-dd-yyyy")', '@item.Duration', '@item.PeriodNotes', '@dtAlertDate', '@item.OtherEmailAddress');" class="btn btn-info"><i class="fas fa-eye"></i></a>
                                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                                    {
                                                                                        <a href="javascript:deletePeriod(@item.PeriodId, @Model.SiteDetailsId)" class="btn btn-danger"><i class="fas fa-trash"></i></a>
                                                                                    }

                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    }

                                                                </tbody>
                                                            </table>






                                                        </div>
                                                        <!-- /.card-body -->
                                                    </div>

                                                </div>

                                            }
                                            else if (Model.AssetTypeId == 5)
                                            {

                                                <div class="col-12 col-sm-8">


                                                    <div class="card card-info">
                                                        <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                            <div class="row">
                                                                <div class="col-10">
                                                                    <h3 class="card-title">Critical Date Tracker</h3>
                                                                </div>
                                                                <div class="col-2">
                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                    {
                                                                        <button type="button" class="btn btn-xs btn-warning" data-toggle="modal" data-target="#modal-new-period">
                                                                            Add New
                                                                        </button>
                                                                    }

                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div class="card-body">



                                                            <table id="example1_" class="table table-sm text-sm">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Critical Item</th>
                                                                        <th>Duration</th>
                                                                        <th>Start Date</th>
                                                                        <th>End Date</th>
                                                                        <th>Days To Expiry</th>
                                                                        <th>Notes</th>
                                                                        <th>Alert Date</th>
                                                                        <th>Email</th>
                                                                        <th></th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody>

                                                                    @foreach (var item in Model.LeaseWithPurchasePeriodList)
                                                                    {
                                                                        var dtAlertDate = item.AlertDate == default(DateTime?) ? "" : item.AlertDate.Value.ToString("MM-dd-yyyy");
                                                                        <tr>
                                                                            <td>@item.PeriodMaster</td>
                                                                            <td>@item.Duration</td>
                                                                            <td>@item.StartDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.EndDate.ToString("MM/dd/yyyy")</td>
                                                                            <td>@item.DaysToExpire</td>
                                                                            <td>@item.PeriodNotes</td>
                                                                            <td>@dtAlertDate</td>
                                                                            <td>@item.OtherEmailAddress</td>
                                                                            <td>
                                                                                <div class="btn-group btn-group-sm">
                                                                                    <a href="javascript:editPeriod(@item.PeriodId, '@item.PeriodMaster', '@item.StartDate.ToString("MM-dd-yyyy")', '@item.Duration', '@item.PeriodNotes', '@dtAlertDate', '@item.OtherEmailAddress');" class="btn btn-info"><i class="fas fa-eye"></i></a>
                                                                                    @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                                    {
                                                                                        <a href="javascript:deletePeriod(@item.PeriodId, @Model.SiteDetailsId)" class="btn btn-danger"><i class="fas fa-trash"></i></a>
                                                                                    }

                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    }

                                                                </tbody>
                                                            </table>






                                                        </div>
                                                        <!-- /.card-body -->
                                                    </div>

                                                </div>

                                            }
                                        }


                                        <div class="col-12 col-sm-8" id="divTblDisposition" style="@showDispositions">


                                            <div class="card card-info">
                                                <div class="card-header @sams.Common.Helper.PrimaryColor">
                                                    <div class="row">
                                                        <div class="col-10">
                                                            <h3 class="card-title">Critical Date Tracker</h3>
                                                        </div>
                                                        <div class="col-2">
                                                            @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                            {
                                                                <button type="button" class="btn btn-xs btn-warning" data-toggle="modal" data-target="#modal-new-period">
                                                                    Add New
                                                                </button>
                                                            }

                                                        </div>
                                                    </div>

                                                </div>
                                                <div class="card-body">



                                                    <table id="example1_" class="table table-sm text-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>Critical Item</th>
                                                                <th>Duration</th>
                                                                <th>Start Date</th>
                                                                <th>End Date</th>
                                                                <th>Days To Expiry</th>
                                                                <th>Notes</th>
                                                                <th>Alert Date</th>
                                                                <th>Email</th>
                                                                <th></th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>

                                                            @foreach (var item in Model.DispositionPeriodList)
                                                            {
                                                                var dtAlertDate = item.AlertDate == default(DateTime?) ? "" : item.AlertDate.Value.ToString("MM-dd-yyyy");
                                                                <tr>
                                                                    <td>@item.PeriodMaster</td>
                                                                    <td>@item.Duration</td>
                                                                    <td>@item.StartDate.ToString("MM/dd/yyyy")</td>
                                                                    <td>@item.EndDate.ToString("MM/dd/yyyy")</td>
                                                                    <td>@item.DaysToExpire</td>
                                                                    <td>@item.PeriodNotes</td>
                                                                    <td>@dtAlertDate</td>
                                                                    <td>@item.OtherEmailAddress</td>
                                                                    <td>
                                                                        <div class="btn-group btn-group-sm">
                                                                            <a href="javascript:editPeriod(@item.PeriodId, '@item.PeriodMaster', '@item.StartDate.ToString("MM-dd-yyyy")', '@item.Duration', '@item.PeriodNotes', '@dtAlertDate', '@item.OtherEmailAddress');" class="btn btn-info"><i class="fas fa-eye"></i></a>
                                                                            @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                                                                            {
                                                                                <a href="javascript:deletePeriod(@item.PeriodId, @Model.SiteDetailsId)" class="btn btn-danger"><i class="fas fa-trash"></i></a>
                                                                            }

                                                                        </div>
                                                                    </td>
                                                                </tr>
                                                            }

                                                        </tbody>
                                                    </table>






                                                </div>
                                                <!-- /.card-body -->
                                            </div>

                                        </div>



                                    </div>

































                                </div>

                            </div>
                        }


                    </div>
                    <!-- /.col -->
                </div>

            </section>
            <!-- /.content -->
        </div>


        <div class="modal fade" id="modal-new-period">

            <script>
                function submitPeriod() {

                    var periodMaster = $("#p_PeriodMaster").val().trim();
                    var sDate = $("#p_StartDate").val().trim();
                    var duration = $("#txtDuration").val().trim();
                    var nTes = $("#p_PeriodNotes").val().trim();

                    $("#errPeriodMaster").html("");
                    $("#errStartDate").html("");
                    $("#errDuration").html("");
                    $("#errPeriodNotes").html("");
                    $("#errOtherEmailAddress").html("");

                    if (periodMaster == "") {
                        $("#errPeriodMaster").html("<font color='red'>Please Enter Critical Item</font>");
                        return;
                    }
                    else {
                        $("#errPeriodMaster").html("");
                    }

                    if (sDate == '') {
                        $("#errStartDate").html("<font color='red'>Please Enter Start Date</font>");
                        return;
                    }
                    else {
                        $("#errStartDate").html("");
                    }

                    if (duration == '') {
                        $("#errDuration").html("<font color='red'>Please Enter Duration</font>");
                        return;
                    }
                    else {
                        $("#errDuration").html("");
                    }

                    if (nTes == '') {
                        $("#errPeriodNotes").html("<font color='red'>Please Enter Notes</font>");
                        return;
                    }
                    else {
                        $("#errPeriodNotes").html("");
                    }

                    var otherEmailAddress = $("#OtherEmailAddress").val().trim();
                    /*
                    if (otherEmailAddress != '') {
                        if (!ValidateEmail(otherEmailAddress)) {
                            canSave = false;
                            $("#errOtherEmailAddress").html("<font color='red'>Please enter Valid Email Address</font>");
                            $("#OtherEmailAddress").focus();
                            return;
                        }
                        else {
                            $("#errOtherEmailAddress").html("");
                        }
                    }
                    */

                    $("#SavePeriod").submit();
                }

                function isNumberKey(evt) {
                    var charCode = (evt.which) ? evt.which : event.keyCode
                    if (charCode > 31 && (charCode < 48 || charCode > 57))
                        return false;

                    return true;
                }

            </script>

            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Critical Item</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="@Url.Action("SavePeriod", "NewPropertyDashboard")" id="SavePeriod" name="SavePeriod" method="post" enctype="multipart/form-data">
                            <div class="row">
                                <div class="col-lg-12">

                                    <div class="form-group">
                                        <div class="form-group">
                                            <label for="selSiteState" class="control-label">Critical Item * </label>
                                            <input type="text" value="" name="PeriodMaster" id="p_PeriodMaster" class="form-control" />
                                            <div id="errPeriodMaster"></div>
                                        </div>


                                        <input type="hidden" name="PropertyId" value="@Model.SiteDetailsId" id="PropertyId" />
                                        <input type="hidden" name="PropertyType" id="p_PropertyId" />
                                        <input type="hidden" name="PeriodId" value="0" id="p_PeriodId" />
                                        <input type="hidden" name="PeriodType" id="periodType" value="@periodType" />

                                    </div>


                                    <!-- /.input group -->
                                    <div class="form-group">
                                        <label for="p_StartDate" class="control-label">Start Date * </label>
                                        <input type="text" value="" name="StartDate" class="form-control" id="p_StartDate" readonly />
                                        <div id="errStartDate"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="txtDuration" class="control-label">Duration *</label>
                                        <input type="text" value="" name="AddedDuration" class="form-control" id="txtDuration" onkeypress="return isNumberKey(event)" />
                                        <div id="errDuration"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="EarnestMoney" class="control-label">Notes * </label>
                                        <textarea name="PeriodNotes" class="form-control" rows="5" id="p_PeriodNotes"></textarea>
                                        <div id="errPeriodNotes"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="p_AlertDate" class="control-label">Alert Date</label>
                                        <input type="text" value="" name="AlertDate" class="form-control" id="p_AlertDate" readonly />
                                        <a href="javascript:clearAlertDate()">Clear Date</a>
                                    </div>
                                    <script>
                                        function clearAlertDate() {
                                            $("#p_AlertDate").val('');
                                        }
                                    </script>

                                    <div class="form-group">
                                        <label for="OtherEmailAddress" class="control-label">Email Address (If Multiple Emails, Please Seperate By Comma)</label>
                                        <input type="text" value="" name="OtherEmailAddress" class="form-control" id="OtherEmailAddress" />
                                        <div id="errOtherEmailAddress"></div>
                                    </div>

                                </div>

                            </div>
                        </form>

                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 5).CanEdit)
                        {
                            <button type="button" class="btn btn-primary" onclick="submitPeriod()">Save</button>
                        }

                    </div>
                </div>
                <!-- /.modal-content -->
            </div>
            <!-- /.modal-dialog -->
        </div>
        <!-- /.modal -->




        <div class="modal fade" id="modal-default">

            <script>
                function submitValues() {
                    var txtFileType = $("#FileType").val();
                    if (txtFileType == "") {
                        $("#errFileType").html("<font color='red'>Please enter Compliance Type</font>");
                        $("#FileType").focus();
                        return;
                    }
                    else {
                        $("#errFileType").html("");
                    }
                    var fileName = $("#SelectedFile").val();
                    if (!fileName) {
                        $("#errUploadedFile").html("<font color='red'>Please Select a file</font>");
                        return;
                    }
                    else {
                        $("#errUploadedFile").html("");
                    }

                    $("#SaveAdditionalFile").submit();
                }


            </script>

            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title">Select File</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <form action="@Url.Action("SaveAdditionalFile", "NewPropertyDashboard")" id="SaveAdditionalFile" name="SaveAdditionalFile" method="post" enctype="multipart/form-data">
                            <div class="row">
                                <div class="col-lg-12">

                                    <div class="form-group">
                                        <label id="" class="control-label">Display Name</label>
                                        <input id="FileType" name="FileType" class="form-control" />
                                        <input type="hidden" id="PropertyId" name="PropertyId" class="form-control" value="@Model.SiteDetailsId" />
                                        <div id="errFileType"></div>
                                    </div>

                                    <div class="form-group">
                                        <label for="UploadedPdf" class="control-label">Select File</label>
                                        <input type="file" id="SelectedFile" name="SelectedFile" class="form-control" />
                                        <div id="errUploadedFile"></div>
                                    </div>

                                </div>

                            </div>
                        </form>

                    </div>
                    <div class="modal-footer justify-content-between">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        @if (@Model.SelectedPropertyStatusId != 3)
                            @if (loggedInUser.RolePermission.RolePermissionList.FirstOrDefault(p => p.ModuleId == 3).CanEdit)
                            {
                                <button type="button" class="btn btn-primary" onclick="submitValues()">Save changes</button>
                            }

                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->




